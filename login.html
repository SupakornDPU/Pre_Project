<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Login</title>

   <!-- CSS -->
   <link rel="stylesheet" href="css/main.css">

   <!-- W3 School -->
   <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

   <!-- Bootstrap -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

   <style>
      .btn {
         background-color: #b29f82;
         color: white;
      }

      .btn:hover {
         background-color: #b29f82;
      }

      .form-control {
         border: 1px solid #b29f82;
      }

      .w3-bar {
         background-color: #272829;
         color: white;
      }
   </style>
</head>

<body>
   <!-- !Navbar -->
   <navbar-component></navbar-component>
   
   <!-- <div class="w3-top">
      <div class="w3-bar w3-card" id="myNavbar">
         <div class="w3-large d-flex justify-content-between align-items-center text-center">
            <div class="w3-hide-small w3-hide-medium">
               <a href="index.html" class="w3-bar-item w3-button w3-wide block-logo">
                  <img src="img/LOGO.png" alt="" srcset="" class="logo-img">
               </a>
            </div>
            <div class="w3-hide-small w3-hide-medium" style="padding-left: 200px;">
               <a href="index.html" class="w3-bar-item w3-button"> HOME</a>
               <a href="#team" class="w3-bar-item w3-button"> ABOUT</a>
               <a href="#work" class="w3-bar-item w3-button"><i class="fa fa-th"></i> SERVICE POINT</a>
               <a href="#contact" class="w3-bar-item w3-button"><i class="fa fa-envelope"></i> CONTACT</a>
            </div>
            <div class="w3-hide-small w3-hide-medium" id="authLoginRegis">
               <a href="login.html" class="w3-bar-item w3-button w3-wide"><i class="fa fa-user"></i>LOGIN</a>
               <a href="register.html" class="w3-bar-item w3-button w3-wide"><i class="fa fa-user"></i>REGISTER</a>
            </div>
            <div class="w3-hide-small w3-hide-medium" id="profile" style="display: none;">
               <a href="#" class="w3-bar-item w3-button w3-wide"><i class="fa fa-user"></i>Profile</a>
               <a href="#" class="w3-bar-item w3-button w3-wide" id="logout"><i class="fa fa-user"></i>LOGOUT</a>
            </div>
         </div> -->

   <!-- Navbar on small screens -->
   <!-- <a href="javascript:void(0)" class="w3-bar-item w3-button w3-right w3-hide-large" onclick="w3_open()">
            <i class="fa fa-bars"></i>
         </a>
      </div>
   </div> -->

   <!-- Sidebar on small screens when clicking the menu icon -->
   <nav class="w3-sidebar w3-bar-block w3-black w3-card w3-animate-left w3-hide-medium w3-hide-large"
      style="display:none;margin-top: -250px;" id="mySidebar">
      <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-large w3-padding-16">Close
         ×</a>
      <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button">ABOUT</a>
      <a href="#team" onclick="w3_close()" class="w3-bar-item w3-button">TEAM</a>
      <a href="#work" onclick="w3_close()" class="w3-bar-item w3-button">WORK</a>
      <a href="#pricing" onclick="w3_close()" class="w3-bar-item w3-button">PRICING</a>
      <a href="#contact" onclick="w3_close()" class="w3-bar-item w3-button">CONTACT</a>
   </nav>
   <!-- !Navbar -->

   <!-- !Form Login -->
   <div class="container" style="margin-top: 250px; margin-bottom: 250px;">
      <form id="loginForm">
         <div class="d-flex justify-content-center align-items-center mb-5">
            <h1 style="font-weight: 500;">LOGIN</h1>
         </div>

         <!-- Row 1 -->
         <div class="row d-flex justify-content-center align-items-center">
            <div class="col-md-4">
               <div class="form-outline mb-4">
                  <label class="mb-2" for="typeEmail">Email</label>
                  <input type="text" id="typeEmail" class="form-control form-control-lg" name="email" required />
               </div>
            </div>
         </div>

         <!-- Row 2 -->
         <div class="row d-flex justify-content-center align-items-center">
            <div class="col-md-4">
               <div class="form-outline mb-4">
                  <label class="mb-2" for="typePassword">Password</label>
                  <input type="password" id="typePassword" class="form-control form-control-lg" name="password"
                     required />
               </div>
               <!-- Button -->
               <div class="d-grid gap-2 col-md-12 mx-auto">
                  <button type="submit" class="btn btn-lg">SIGN IN</button>
               </div>
            </div>
         </div>
      </form>
   </div>
   <!-- !Form Login -->

   <!-- !Footer -->
   <footer-component></footer-component>

   <script type="module">

      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
      import { getAuth, createUserWithEmailAndPassword, onAuthStateChanged, signOut, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";

      const firebaseConfig = {
         apiKey: "AIzaSyCODow7HLMRU3ik_9glYxoxjE2R6prKjq8",
         authDomain: "recycle-machine-23716.firebaseapp.com",
         projectId: "recycle-machine-23716",
         storageBucket: "recycle-machine-23716.appspot.com",
         messagingSenderId: "715253109818",
         appId: "1:715253109818:web:8dae7aa5ed3ada676e1103",
         measurementId: "G-DEQYWJ115S"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);

      const loginForm = document.getElementById("loginForm");
      const authLoginRegis = document.getElementById("authLoginRegis");
      const profile = document.getElementById("profile");
      const logout = document.getElementById("logout");

      loginForm.addEventListener("submit", (e) => {
         e.preventDefault();
         const email = loginForm.email.value
         const password = loginForm.password.value
         signInWithEmailAndPassword(auth, email, password)
            .then((result) => {
               alert("เข้าสู่ระบบสำเร็จ");
               window.location.href = "index.html";
            }).catch((err) => {
               alert("เข้าสู่ระบบไม่สำเร็จ");
            });
      })

      onAuthStateChanged(auth, (user) => {
         if (user && user.email === "nongfilmcry@gmail.com") {
            // User is signed in and has the admin email address
            document.getElementById("admin-menu").style.display = "block";
         } else {
            // User is signed out or does not have the admin email address
            document.getElementById("admin-menu").style.display = "none";
         }
      });
      // onAuthStateChanged(auth, (user) => {
      //    if (user) {
      //       profile.style.display = "block";
      //       authLoginRegis.style.display = "none";
      //    } else {
      //       profile.style.display = "none";
      //       authLoginRegis.style.display = "block";
      //    }
      // });

      logout.addEventListener("click", (e) => {
         signOut(auth)
            .then(() => {
               alert("ออกจากระบบสำเร็จ");
            }).catch((err) => {
               alert("ออกจากระบบไม่สำเร็จ");
            });
      })
   </script>

   <!-- SCRIPT -->
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"></script>
   <script src="component/component.js"></script>
</body>

</html>