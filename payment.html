<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>PAYMENT</title>

   <!-- CSS -->
   <link rel="stylesheet" href="css/main.css">

   <!-- W3 School -->
   <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
   <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

   <!-- Bootstrap -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">

   <style>
      .w3-bar {
         background-color: #272829;
         color: white;
      }

      .page-content {
         margin-top: 100px;
         padding-top: 100px;
      }

      .btn-redeem {
         background-color: #b29f82;
         color: white;
      }

      .btn-redeem:hover {
         background-color: #706656;
         color: white;
      }

      .btn-redeem:active {
         background-color: #b29f82 !important;
      }

      a {
         text-decoration: none;
         color: #b29f82;
      }

      a:hover {
         color: #706656;
      }

      .cart-img {
         width: 170px;
         height: 150px;
      }

      .cart-img img {
         width: 100%;
         height: 100%;
         object-fit: cover;
         border-radius: 5px;
      }

      .payment-detail {
         height: 200px;
         border-radius: 5px;
         background-color: #FFEBEB;
      }
   </style>

</head>

<body>
   <!-- !Navbar -->
   <navbar-component></navbar-component>

   <!-- Sidebar on small screens when clicking the menu icon -->
   <nav class="w3-sidebar w3-bar-block w3-black w3-card w3-animate-left w3-hide-large"
      style="display:none;margin-top: -100px;" id="mySidebar">
      <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-large w3-padding-16">Close
         ×</a>
      <a href="index.html" onclick="w3_close()" class="w3-bar-item w3-button">HOME</a>
      <a href="shop.html" onclick="w3_close()" class="w3-bar-item w3-button">SHOP</a>
      <a href="service_point.html" onclick="w3_close()" class="w3-bar-item w3-button">SERVICEPOINT</a>
      <hr>
      <div id="authLoginRegisRes">
         <a href="login.html" onclick="w3_close()" class="w3-bar-item w3-button"><i class="fa fa-user"></i> LOGIN</a>
         <a href="register.html" onclick="w3_close()" class="w3-bar-item w3-button"><i class="fa fa-user"></i>
            REGISTER</a>
      </div>
      <div id="profileRes" style="display:none">
         <a href="login.html" onclick="w3_close()" class="w3-bar-item w3-button"><i class="bi bi-cart-fill"></i>
            CART</a>
         <a href="#" onclick="w3_close()" class="w3-bar-item w3-button" id="logoutRes"><i class="fa fa-user"></i>
            LOGOUT</a>
         <a href="register.html" onclick="w3_close()" class="w3-bar-item w3-button"><i class="fa fa-user"></i>
            PROFILE</a>
      </div>
   </nav>

   <!-- !Content -->
   <div class="container page-content">
      <form id="payment">
         <div class="row my-4" style="margin-left: 0;" id="detailsProduct">
            <div class="col-md-6">
               <div class="row align-items-center payment-detail">
                  <div class="col-6 col-md-6 cart-img">
                     <img src="" alt="" id="paymentImg">
                  </div>
                  <div class="col-6 col-md-6">
                     <h5 id="paymentName" style="font-weight: bolder;"></h5>
                     <h5 id="sizeShow"></h5>
                     <h5 id="paymentPoint"></h5>
                     <h5 id="amount"></h5>
                     <h5 id="total"></h5>
                  </div>
               </div>
            </div>
         </div>
         <div class="row">
            <div class="col-md-6">
               <div class="row">
                  <div class="col-md-12">
                     <h5>Contact Information</h5>
                     <div class="form-floating mb-3">
                        <input type="email" class="form-control" id="floatingEmail" placeholder="Email">
                        <label for="floatingEmail">Email address</label>
                     </div>
                  </div>
               </div>
               <div class="row my-3">
                  <h5>Shipping address</h5>
                  <div class="col-md-6 mb-3">
                     <div class="form-floating">
                        <input type="text" class="form-control" id="floatingFirstname" placeholder="First name">
                        <label for="floatingFirstname">First name</label>
                     </div>
                  </div>
                  <div class="col-md-6">
                     <div class="form-floating">
                        <input type="text" class="form-control" id="floatingLastname" placeholder="Last name">
                        <label for="floatingLastname">Last name</label>
                     </div>
                  </div>
               </div>
               <div class="row mb-3">
                  <div class="col-md-12">
                     <div class="form-floating">
                        <textarea class="form-control" placeholder="Address" id="floatingAddress"></textarea>
                        <label for="floatingAddress">Address</label>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-md-6 mb-3">
                     <div class="form-floating">
                        <input type="text" class="form-control" id="floatingProvince" placeholder="Province">
                        <label for="floatingProvince">Province</label>
                     </div>
                  </div>
                  <div class="col-md-6">
                     <div class="form-floating">
                        <input type="number" class="form-control" id="floatingPostalCode" placeholder="Postal Code">
                        <label for="floatingPostalCode">Postal Code</label>
                     </div>
                  </div>
               </div>
               <div class="row mb-3">
                  <div class="col-md-12">
                     <div class="form-floating my-3">
                        <input type="number" class="form-control" id="floatingPhone" placeholder="Phone">
                        <label for="floatingPhone">Phone</label>
                     </div>
                  </div>
               </div>
               <div class="row justify-content-center align-items-center">
                  <div class="col-5 col-md-6 text-start">
                     <a href="product_1.html">Return To Product</a>
                  </div>
                  <div class="col-7 col-md-6 text-end">
                     <button class="btn btn-redeem btn-lg btn-block" type="submit" id="redeem">Continue to
                        shiping</button>
                  </div>
               </div>
            </div>
         </div>
      </form>
   </div>

   <!-- !Footer -->
   <footer-component></footer-component>

   <script>
      // localStorage.clear();
      if (localStorage.length == 0) {
         document.getElementById("detailsProduct").style.display = "none";
      } else {
         document.getElementById("sizeShow").innerHTML = "Size : " + localStorage.getItem("selectSize");
         document.getElementById("paymentImg").src = localStorage.getItem("productImg");
         document.getElementById("paymentName").innerHTML = localStorage.getItem("productName");
         document.getElementById("paymentPoint").innerHTML = localStorage.getItem("productPoint");
         document.getElementById("amount").innerHTML = "Amount : " + localStorage.getItem("amount");
         document.getElementById("total").innerHTML = "Total : " + localStorage.getItem("total");
      }

   </script>

   <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
      import { getFirestore, collection, getDocs, deleteDoc, addDoc, doc } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-firestore.js";
      import { getAuth, deleteUser, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-auth.js";

      const firebaseConfig = {
         apiKey: "AIzaSyCODow7HLMRU3ik_9glYxoxjE2R6prKjq8",
         authDomain: "recycle-machine-23716.firebaseapp.com",
         projectId: "recycle-machine-23716",
         storageBucket: "recycle-machine-23716.appspot.com",
         messagingSenderId: "715253109818",
         appId: "1:715253109818:web:8dae7aa5ed3ada676e1103",
         measurementId: "G-DEQYWJ115S"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const dborder = getFirestore(app);
      const form = document.getElementById("payment");

      form.addEventListener("submit", (e) => {
         e.preventDefault();
         addDoc(collection(dborder, "order"), {
            Order_Email: form.floatingEmail.value,
            Order_Name: form.floatingFirstname.value,
            Order_Lastname: form.floatingLastname.value,
            Order_Address: form.floatingAddress.value,
            Order_Province: form.floatingProvince.value,
            Order_Postalcode: form.floatingPostalCode.value,
            Order_Phone: form.floatingPhone.value,
            Order_Product_Name: localStorage.getItem("productName"),
            Order_Product_Point: localStorage.getItem("productPoint"),
            Order_Product_Size: localStorage.getItem("selectSize"),
            Order_Product_Total: localStorage.getItem("total"),
            Order_Product_Amount: localStorage.getItem("amount"),
            Order_Product_Image: paymentImg.src,

         }).then(() => {
            swal.fire({
               title: "สั่งซื้อเสร็จสิ้น",
               icon: "success",
               showConfirmButton: false,
               timer: 1500
            }).then(() => {
               window.location.href = "order.html";
               localStorage.clear();
            });
         });
      });
   </script>

   <!-- SCRIPT -->
   <script data-require="jquery@3.1.1" data-semver="3.1.1"
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"></script>
   <script src="component/component.js"></script>
   <script src="JS/script.js"></script>

   <!-- Sweetalert -->
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>

</html>